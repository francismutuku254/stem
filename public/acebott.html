<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Acebott SmartCar Assembly Guide</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/x-icon" href="images/image1.png" />
  <style>
    :root {
      --primary-color: #007bff;
      --secondary-color: #6c757d;
      --card-bg: #fff;
      --text-color: #343a40;
      --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      --hover-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }
    body {
      background-color: #f0f2f5;
      font-family: 'Poppins', sans-serif;
      color: var(--text-color);
      line-height: 1.6;
    }
    .container {
      max-width: 900px;
    }
    .header-title {
      font-weight: 700;
      color: var(--text-color);
      font-size: 2.5rem;
      position: relative;
      padding-bottom: 10px;
    }
    .header-title::after {
      content: '';
      position: absolute;
      left: 50%;
      bottom: 0;
      transform: translateX(-50%);
      height: 4px;
      width: 80px;
      background-color: var(--primary-color);
      border-radius: 2px;
    }
    .step-card {
      border-radius: 20px;
      background: var(--card-bg);
      padding: 30px;
      box-shadow: var(--shadow);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      overflow: hidden;
    }
    .step-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--hover-shadow);
    }
    .step-header {
      color: var(--primary-color);
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 10px;
    }
    .step-image-wrapper {
      position: relative;
      border-radius: 15px;
      overflow: hidden;
      margin-bottom: 20px;
      transition: transform 0.3s ease;
    }
    .step-image-wrapper:hover {
      transform: scale(1.02);
    }
    .step-img {
      width: 100%;
      height: auto;
      max-height: 500px;
      object-fit: cover;
      display: block;
      margin-bottom: 10px;
    }
    .step-img-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      text-align: center;
      padding: 10px;
      font-size: 0.9rem;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .step-image-wrapper:hover .step-img-caption {
      opacity: 1;
    }
    .nav-btn {
      border-radius: 50px;
      padding: 12px 25px;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    .nav-btn-prev {
      background-color: var(--secondary-color);
      border-color: var(--secondary-color);
    }
    .nav-btn-prev:hover {
      background-color: #5a6268;
      border-color: #545b62;
      transform: translateX(-5px);
    }
    .nav-btn-next {
      background-color: var(--primary-color);
      border-color: var(--primary-color);
    }
    .nav-btn-next:hover {
      background-color: #0056b3;
      border-color: #004085;
      transform: translateX(5px);
    }
    .progress-bar-container {
      height: 8px;
      background-color: #e9ecef;
      border-radius: 4px;
      margin-top: 20px;
    }
    .progress-bar {
      background-color: var(--primary-color);
      border-radius: 4px;
      transition: width 0.4s ease-in-out;
    }
    pre code {
      display: block;
      padding: 15px;
      background: #1e1e1e;
      color: #f8f8f2;
      border-radius: 10px;
      overflow-x: auto;
      font-size: 0.9rem;
    }
    .copy-btn {
      margin-top: 10px;
      display: inline-block;
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.85rem;
      transition: background 0.3s ease;
    }
    .copy-btn:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>

  <div class="container my-5">
    <h1 class="header-title text-center mb-5 animate__animated animate__fadeInDown">Acebott SmartCar Assembly Guide</h1>

    <div id="step-container" class="step-card animate__animated animate__fadeIn">
      <h4 id="step-title" class="step-header text-center"></h4>
      <div id="step-image-wrapper" class="step-image-wrapper">
        <div id="step-images"></div>
        <div id="step-caption" class="step-img-caption"></div>
      </div>
      <p id="step-desc" class="text-center"></p>
      <div id="code-block" style="display:none;">
        <pre><code id="arduino-code" class="language-cpp"></code></pre>
        <button class="copy-btn" onclick="copyCode()">ðŸ“‹ Copy Code</button>
      </div>
    </div>

    <div class="progress-bar-container mt-4">
      <div id="progress-bar" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>
    </div>

    <div class="d-flex justify-content-between mt-4">
      <button id="prev-btn" class="btn btn-secondary nav-btn nav-btn-prev" onclick="prevStep()">â¬… Previous</button>
      <button id="next-btn" class="btn btn-primary nav-btn nav-btn-next" onclick="nextStep()">Next âž¡</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const steps = [
      { title: "Intro", img: "images/complete.png", desc: "Hello and welcome. In this tutorial, we'll assemble this robot.", caption: "Acebott SmartCar Kit" },
      { title: "What's in the Box",  desc: "The kit includes: ESP32 controller board, ESP32 car shield, 2 LED modules, buzzer module, IR receiver module, ultrasonic sensor with bracket, line/trace sensor, 4 motors, 4 mecanum wheels, IR remote, servo, battery holder, 4 motor brackets, 4 couplings, cables, screwdriver, cross wrench, 2 acrylic boards, short M3 screws, long M3 screws, M3 nuts, short M2 screws, M2 nuts, long self-tapping M2 screws, self-tapping M1.45 screws, short pillars, long pillars, cable ties, black tape, and USB cable.", caption: "Unboxing Acebott SmartCar Kit" },
      { title: "Step 1: Installing the Line Sensor", img: "images/s1.png", desc: "Install the line sensor with screws, nuts, and connectors. Ensure proper alignment and donâ€™t overtighten.", caption: "Line sensor installation" },
      { title: "Step 2: Installing Long Pillars", img: "images/s2.png", desc: "Need: 6 pillars, 6 M3 screws. Insert a screw in the hole from the bottom. Hold the screw with your finger and turn in the pillar. Tighten gently with your finger. Repeat for all the pillars.", caption: "Pillars mounted" },
      { 
        title: "Step 3: Installing Motors", 
        imgs: ["images/s3-1.png", "images/s3-2.png"], 
        desc: "Insert a long screw though the motor from the back of the motor. Take a bracket then insert the other screw. Install the nut to hold the bracket. Be careful not to tighten the wire behind the braket. Tighten by holding the screw driver against the screw head and turning the cross wrench. Make sure it is tight to prevent the wheels from wobbling later. Repeat for the other three motors. Then align the motor as shown with the screw holes on the board. If a zip tie is in the way, nudge it away from that face. Insert the short screw though the hole and turn. Insert the other screw and tighten. Make sure to tighten both screws securely to prevent wobble. Repeat for the other three motors.Mount the motors with brackets, screws, and nuts. Ensure wires are free and tighten securely.", 
        caption: "Motors fixed to board" 
      },
      { title: "Step 4: Installing Controller Board & Car Shield", img: "images/s4.png", desc: "Peel off the protective paper from both sides of the board. Insert a pillar in its hole then screw the nut from the bottom. Repeat for the other three pillars. Next, place the controller board as shown and insert the screw. Please note that this screw should not be installed. Secure the board using the other two screws. Be careful not to overtighten the screws.", caption: "Controller mounted" },
      { 
        title: "Step 5: Installing LED Modules, Buzzer, IR Sensor", 
        imgs: ["images/s5-1.png", "images/s5-2.png"], 
        desc: "Connect the dupont connector as shown. The red wire always corresponds to the V pin. Insert a screw though the module and upper board holes. Secure using a nut. SImilarly, install the second screw. DO NOT OVERTIGHTEN!! The board might flex. Only tighten until you feel a little resistance. Next install the other modules. The buzzer goes here, and the IR sensor here. Remember not to overtighten.",
        caption: "Modules installed" 
      },
      { title: "Step 6: Installing Servo Motor", img: "images/s6.png", desc: "Insert the servo into its slot and secure with M2 screws and nuts.", caption: "Servo mounted" },
      { title: "Step 7: Installing Battery Holder", img: "images/s7.png", desc: "Align the holder holes with the board holes as shown. Insert a screw and tighten with a nut. Repeat. Be careful not to overtighten.", caption: "Battery holder installed" },
      { 
        title: "Step 8: Installing Ultrasonic Module", 
        imgs: ["images/s8-1.png", "images/s8-2.png","images/s8-3.png"], 
        desc: "Peel the protective film from the bracket. Place the module against the bracket as shown. Insert the screw as shown and install the nut. Repeat for the other three screws. Rest the servo arm as shown. From the bottom, install the M1.4 screw. It will be a little difficult. Install the second screw. Alternate between the two screws until the arm is held tightly against the bracket. Next install the wire. GENTLY wiggle the connector. Remember the red wire corresponds with the V pin. Then secure the the bracket to the servo as shown. Please note the teeth on the servo should mesh with the teeth on the arm. Secure the arm by screwing it in. ",
        caption: "Ultrasonic module installed" 
      },
      { title: "Step 9: Joining Upper and Lower Boards", img: "images/s9.png", desc: "Pass the motor and sensor cables through the holes as shown. Align the plates as shown. Lower the upper assembly onto the lower assembly. Secure them using the M3 screws as shown.", caption: "Boards joined" },
      { 
        title: "Step 10: Installing Mecanum Wheels", 
        imgs: ["images/s10-1.png", "images/s10-2.png"], 
        desc: "NOTE: The wheels must be installed as shown. The small wheels must all point towards the vehicle centre!! Insert a coupling onto the motor shaft and insert the appropriate wheel on the coupling. Next insert the M2 screw and tighten using the screw driver. It is a little difficult, but make sure it is secure. Please check if the wheel is wobbling. If so, tighten the motor bracket. Repeat for the other 3 wheels. Again, please be sure that the wheels are installed as shown.",
        caption: "Wheels installed"
      },
      { title: "Step 11: Wiring", img: "images/s11.png", desc: "Connect servo, LED, buzzer, IR receiver, ultrasonic, and line tracker cables correctly.", caption: "Wiring connections" },
      
      {
        title: "Step 12: Programming", 
       
        desc: "Upload the following Arduino code using Arduino IDE. This program enables remote-controlled movement of the SmartCar via IR remote.", 
        caption: "Programming the robot",
        code: `#include <vehicle.h>
#include <IRremote.h>

int IRpin = 4;
unsigned long lastCommandTime;
const unsigned long commandTimeout = 100;
uint32_t last_decode = 0;
uint32_t current_decode = 0;

IRrecv myIRrecv(IRpin);
vehicle myCar;
int Speed = 255;

void setup() {
  Serial.begin(9600);
  myIRrecv.enableIRIn();
  myCar.Init();
}

void loop() {
  if (myIRrecv.decode()) {
    lastCommandTime = millis();
    current_decode = myIRrecv.decodedIRData.decodedRawData;
    if (myIRrecv.decodedIRData.flags) {
      current_decode = last_decode;
    }
    Serial.print(current_decode, HEX);
    Serial.println("");
    switch (current_decode) {
      case 0xB946FF00: myCar.Move(Forward, Speed); break;
      case 0xEA15FF00: myCar.Move(Backward, Speed); break;
      case 0xBB44FF00: myCar.Move(Contrarotate, Speed); break;
      case 0xBC43FF00: myCar.Move(Clockwise, Speed); break;
      case 0xE916FF00: myCar.Move(Move_Left, Speed); break;
      case 0xF20DFF00: myCar.Move(Move_Right, Speed); break;
    }
    last_decode = current_decode;
    myIRrecv.resume();
  }
  if (millis() - lastCommandTime > commandTimeout) {
    myCar.Move(Stop, 0);
  }
}`
      }
    ];

    let currentStep = 0;

    function showStep(index) {
      const step = steps[index];
      const stepContainer = document.getElementById("step-container");
      stepContainer.classList.add('animate__fadeOut');
      setTimeout(() => {
        document.getElementById("step-title").innerText = step.title;

        // Handle images (single or multiple)
        const stepImagesContainer = document.getElementById("step-images");
        stepImagesContainer.innerHTML = "";
        if (step.imgs && step.imgs.length > 0) {
          step.imgs.forEach(src => {
            const imgEl = document.createElement("img");
            imgEl.src = src;
            imgEl.alt = step.title;
            imgEl.classList.add("step-img");
            stepImagesContainer.appendChild(imgEl);
          });
        } else if (step.img) {
          const imgEl = document.createElement("img");
          imgEl.src = step.img;
          imgEl.alt = step.title;
          imgEl.classList.add("step-img");
          stepImagesContainer.appendChild(imgEl);
        }

        document.getElementById("step-desc").innerText = step.desc;
        document.getElementById("step-caption").innerText = step.caption;

        // Handle code block
        if (step.code) {
          document.getElementById("code-block").style.display = "block";
          document.getElementById("arduino-code").innerText = step.code;
        } else {
          document.getElementById("code-block").style.display = "none";
        }
        
        const progress = ((currentStep + 1) / steps.length) * 100;
        document.getElementById("progress-bar").style.width = progress + "%";
        
        stepContainer.classList.remove('animate__fadeOut');
        stepContainer.classList.add('animate__fadeIn');
      }, 300);
    }

    function nextStep() {
      if (currentStep < steps.length - 1) {
        currentStep++;
        showStep(currentStep);
      }
    }

    function prevStep() {
      if (currentStep > 0) {
        currentStep--;
        showStep(currentStep);
      }
    }

    function copyCode() {
      const codeText = document.getElementById("arduino-code").innerText;
      navigator.clipboard.writeText(codeText).then(() => {
        alert("âœ… Code copied to clipboard!");
      });
    }

    // Initial load
    window.onload = () => {
      showStep(currentStep);
    };
  </script>

</body>
</html>
