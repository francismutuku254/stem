<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Acebott SmartCar Camera Assembly Guide</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/x-icon" href="images/image1.png" />
  <style>
    :root {
      --primary-color: #007bff;
      --secondary-color: #6c757d;
      --card-bg: #fff;
      --text-color: #343a40;
      --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      --hover-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }

    body {
      background-color: #f0f2f5;
      font-family: 'Poppins', sans-serif;
      color: var(--text-color);
      line-height: 1.6;
    }
         /* ===== HEADER ===== */
    header {
      background: #03009dff;
      color: white;
      padding: 15px 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      position: fixed;
      width: 100%;
      top: 0;
      z-index: 1000;
      
    }
    .logo-container {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .logo-container img {
      height: 40px;
      width: 40px;
      object-fit: contain;
    }
    .logo-container .logo-text {
      font-size: 1.5rem;
      font-weight: bold;
      line-height: 1.2;
    }
    .logo-container .tagline {
      font-size: 0.8rem;
      font-weight: 400;
      margin-top: 2px;
      color: #e6f9f9;
    }
    nav {
      display: flex;
      gap: 20px;
    }
    nav a {
      font-weight: 500;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: 0.3s;
      color: white;
      text-decoration: none;
    }
    nav a:hover {
      color: #d9f7f8;
      transform: translateY(-2px);
    }
    nav a i {
      font-size: 1rem;
    }
    nav a:nth-child(1) i { color: #FFD700; }
    nav a:nth-child(2) i { color: #00FFB3; }
    nav a:nth-child(3) i { color: #1E90FF; }
    nav a:nth-child(4) i { color: #FF6347; }
    nav a:nth-child(5) i { color: #FF8C00; }   /* Shop */
    nav a:nth-child(6) i { color: #DC143C; }   /* Logout */
    nav a:hover i { transform: scale(1.2); color: #ffffff; }
    nav a:hover { color: #d9f7f8; transform: translateY(-2px); }

    /* Hamburger */
    .hamburger {
      display: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #fff;
    }
    @media (max-width: 768px) {
      nav {
        position: absolute;
        top: 60px;
        right: 0;
        background: #00979D;
        flex-direction: column;
        gap: 15px;
        width: 200px;
        padding: 20px;
        display: none;
      }
      nav.active {
        display: flex;
      }
      .hamburger {
        display: block;
      }
    }
    .container {
      max-width: 900px;
    }
    .header-title {
      font-weight: 700;
      color: var(--text-color);
      font-size: 2.5rem;
      position: relative;
      padding-bottom: 10px;
      margin-top: 100px;
    }

    .header-title::after {
      content: '';
      position: absolute;
      left: 50%;
      bottom: 0;
      transform: translateX(-50%);
      height: 4px;
      width: 80px;
      background-color: var(--primary-color);
      border-radius: 2px;
    }

    .step-card {
      border-radius: 20px;
      background: var(--card-bg);
      padding: 30px;
      box-shadow: var(--shadow);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      overflow: hidden;
    }

    .step-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--hover-shadow);
    }

    .step-header {
      color: var(--primary-color);
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .step-image-wrapper {
      position: relative;
      border-radius: 15px;
      overflow: hidden;
      margin-bottom: 20px;
      transition: transform 0.3s ease;
    }

    .step-image-wrapper:hover {
      transform: scale(1.02);
    }
.step-img {
  width: 100%;
  height: auto;
  display: block;
  max-height: none;   /* remove fixed height restriction */
  object-fit: scale-down; /* ensures it scales but fills width */
}


    .step-img-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      text-align: center;
      padding: 10px;
      font-size: 0.9rem;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .step-image-wrapper:hover .step-img-caption {
      opacity: 1;
    }

    .nav-btn {
      border-radius: 50px;
      padding: 12px 25px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .nav-btn-prev {
      background-color: var(--secondary-color);
      border-color: var(--secondary-color);
    }

    .nav-btn-prev:hover {
      background-color: #5a6268;
      border-color: #545b62;
      transform: translateX(-5px);
    }

    .nav-btn-next {
      background-color: var(--primary-color);
      border-color: var(--primary-color);
    }

    .nav-btn-next:hover {
      background-color: #0056b3;
      border-color: #004085;
      transform: translateX(5px);
    }

    .progress-bar-container {
      height: 12px;
      background-color: #e9ecef;
      border-radius: 6px;
      margin-top: 20px;
      overflow: hidden;
      position: relative;
    }

    .progress-bar {
      background: linear-gradient(90deg, var(--primary-color), #00c6ff);
      border-radius: 6px;
      transition: width 0.4s ease-in-out;
      height: 100%;
    }
    .progress-label {
      position: absolute;
      top: -25px;
      right: 0;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--secondary-color);
    }

    pre code {
      display: block;
      padding: 15px;
      background: #1e1e1e;
      color: #f8f8f2;
      border-radius: 10px;
      overflow-x: auto;
      font-size: 0.9rem;
    }

    .copy-btn {
      margin-top: 10px;
      display: inline-block;
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.85rem;
      transition: background 0.3s ease;
    }

    .copy-btn:hover {
      background: #0056b3;
    }

    .download-btn {
      text-decoration: none;
    }
        /* ====== FOOTER ====== */
    footer {
    background: #222;
    color: #aaa;
    padding: 20px;
    font-size: 0.9rem;
    margin-top: 50px;
  }
  .footer-content {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 6px;          /* reduce gap to prevent wrapping */
    flex-wrap: nowrap; /* keep everything in one line */
    text-align: center;
  }
  .footer-content a {
    color: #4CAF50;
    text-decoration: none;
    font-weight: 500;
    white-space: nowrap; /* prevents link breaking into 2 lines */
  }
  .footer-content a:hover {
    text-decoration: underline;
  }

  /* If screen is too small, shrink text instead of breaking */
  @media (max-width: 400px) {
    .footer-content {
      font-size: 0.8rem;
      gap: 4px;
    }
  }
  </style>
</head>

<body>
  <!-- ===== HEADER ===== -->
  <header>
    <div class="logo-container">
      <img src="images/image1.png" alt="Novatech Logo">
      <div>
        <div class="logo-text">Novatech STEM</div>
        <div class="tagline">Electronic Engineering Solutions</div>
      </div>
    </div>
    <div class="hamburger"><i class="fas fa-bars"></i></div>
    <nav>
      <a href="/stem/index.php"><i class="fas fa-home"></i> Home</a>
      <a href="/stem/projects.php"><i class="fas fa-project-diagram"></i> Projects</a>
      <a href="/stem/resources.php"><i class="fas fa-book"></i> Resources</a>
      <a href="/stem/about.php"><i class="fas fa-info-circle"></i> About</a>
      <a href="https://novatech.co.ke/" target="_blank"><i class="fas fa-store"></i> Shop</a>
      <a href="#"><i class="fas fa-sign-out-alt"></i> Logout</a>
    </nav>
  </header>

  <div class="container my-5">
    <h1 class="header-title text-center mb-5 animate__animated animate__fadeInDown">Acebott SmartCar with Camera Assembly Guide</h1>

    <div id="step-container" class="step-card animate__animated animate__fadeIn">
      <h4 id="step-title" class="step-header text-center"></h4>
      <div id="step-image-wrapper" class="step-image-wrapper">
        <div id="step-images"></div>
        <div id="step-caption" class="step-img-caption"></div>
      </div>
      <p id="step-desc" class="text-center"></p>
      <div id="code-block" style="display:none;">
        <!-- <pre><code id="arduino-code" class="language-cpp"></code></pre> -->
        <!-- <button id=copy-button class="copy-btn">Copy</button> -->
        <a href="./code/Acebott/QD002/Camera.zip" class="copy-btn download-btn" download="Camera.zip">Download</a>
      </div>
    </div>

    <div class="progress-bar-container mt-4">
      <div id="progress-bar" class="progress-bar" role="progressbar"></div>
      <div id="progress-label" class="progress-label">Step 1 of X</div>
    </div>

    <div class="d-flex justify-content-between mt-4">
      <button id="prev-btn" class="btn btn-secondary nav-btn nav-btn-prev">⬅ Previous</button>
      <button id="next-btn" class="btn btn-primary nav-btn nav-btn-next">Next ➡</button>
    </div>
  </div>
  
   <!-- ===== FOOTER ===== -->
  <footer>
    <div class="footer-content">
      <span>© <script>document.write(new Date().getFullYear());</script></span>
      <a href="https://novatech.co.ke/" target="_blank">Novatech</a>
      <span>STEM Portal. All rights reserved.</span>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script type="module">
    const SmartCarIR = "zip";

    const steps = [
      { title: "Introduction", img: "images/Acebott/QD002/complete-QD002.png", desc: "Here is the complete robot.", caption: "Acebott SmartCar Kit" },
      {
        title: "What's in the Box",
        desc: [
          "ESP32-CAM controller board",
          "Ultrasonic acrylic boards",
          "Servo acrylic boards",
          "4-pin dupont cable",
          "Short M3 screws",
          "Short flathead M3 screwws",
          "Long flathead M3 screws",
          "M3 nuts",
          "M3 lock nuts",
          "M2 screws",
          "M2 nuts",
          "Nylon spacers",
          
        ],
        caption: "Unboxing Acebott SmartCar Kit"
      },
      { title: "Step 1: Disconnecting Wires", img: "images/Acebott/QD002/s1.png", desc: "Unplug the wires from the car shield. No need to unplug from all the modules. ", caption: "Line sensor installation" },
      { title: "Step 2: Separating the Upper and Lower Assemblies", img: "images/Acebott/QD002/s2.png", desc: "Undo the 6 screws on the long pillars. Return the screws in their packaging. Seperate the upper and lower acrylic assemblies.", caption: "Pillars mounted" },
      {
        title: "Step 3: Removing the Ultrasonic Sensor",
        imgs: ["images/Acebott/QD002/s3-1.png", "images/Acebott/QD002/s3-2.png", "images/Acebott/QD002/s3-3.png", "images/Acebott/QD002/s3-4.png"],
        desc: "Unplug the ultrasonic module. Undo the small servo screw on servo arm. Remove the ultrasonic module. Also remove the servo arm from the bracket. ",
        caption: "Motors fixed to board"
      },
      { title: "Step 4: Removing the LED modules and Servo", imgs: ["images/Acebott/QD002/s4-1.png","images/Acebott/QD002/s4-2.png"], desc: "Unplug the modules. Undo the M3 nuts on the module screws, and the M2 nuts on the servo. ", caption: "Controller mounted" },
      {
        title: "Step 5: Installing the Servo Arm on Camera Bracket",
        img: "images/Acebott/QD002/s5.png",
        desc: "Install the servo arm on the bracket. Ensure the notch is on the upper left with respect to the servo hole",
        caption: "Modules installed"
      },
      { title: "Step 6: Assembing Camera Frame", img: "images/Acebott/QD002/s6.png", desc: "Mount the side plates on the top camera plate using the flathead M3 screws and M3 nuts. Ensure the servo arm is on the inner side of the bracket. Also, make sure the servo hole is aligned with the hole on the opposing bracket plate.", caption: "Servo mounted" },
      {
        title: "Step 7: Mounting the camera in its Frame",
        img: "images/Acebott/QD002/s7.png",
        desc: "Insert the camera module with the port facing up. Secure with the M2 screws and nuts. ",
        caption: "Ultrasonic module installed"
      },
      { title: "Step 8: Mounting the Servo", img: "images/Acebott/QD002/s8.png", desc: "Place the servo in the servo plate and secure with M2 screws and nuts. The servo shaft should face up. ", caption: "Battery holder installed" },
      {
        title: "Step 9: Mounting Servo Assembly",
        imgs: ["images/Acebott/QD002/s9-1.png", "images/Acebott/QD002/s9-2.png"],
        desc: "Secure servo bracket side plates onto base plate using flathead M3 and M3 nuts. Mount servo bracket assembly to lower acrylic board using short M3 screws and M3 nuts.",
        caption: "Wheels installed"
      },
      {
        title: "Step 10: Installing the Camera Assembly",
        imgs: ["images/Acebott/QD002/s10-1.png", "images/Acebott/QD002/s10-2.png", "images/Acebott/QD002/s10-3.png"],
        desc: "Partially install the long flathead M3 screw in is hole. Insert the isolation column in the hole and hold it using the screw. Slide in the camera assembly then insert the screw fully. Ensure it is aligned with the servo. Fasten using the lock nut. ",
        caption: "Wheels installed"
      },
      {
        title: "Step 11: Mounting Ultrasonic Module",
        img: "images/Acebott/QD002/s11.png",
        desc: "Mount ultrasonic module in its bracket and secure with the screws and nuts. Connect the wires. ",
        caption: "Wheels installed"
      },
      {
        title: "Step 12: Assembling the Car",
        img: "images/Acebott/QD002/s12.png",
        desc: "Position the ultrasonic assembly. Slide on the upper assembly. Secure the boards with short M3 screws.",
        caption: "Wheels installed"
      },
      { title: "", img: "images/Acebott/QD002/complete-QD002.png", desc: "Here is the complete robot.", caption: "Acebott SmartCar Kit" },
      { title: "Step 13: Wiring", img: "images/Acebott/QD002/s13.png", desc: "Connect servo, LED, buzzer, IR receiver, ultrasonic, and line tracker cables correctly.", caption: "Wiring connections" },

      {
        title: "Step 14: Programming",
        desc: 'Download and extract the source code. Upload "esp32-car.ino" to the controller, and "camera.ino" to the camera. Make sure you select the "WROOM ESP32" board for the car and "AI Thinker" for the camera.',
        caption: "Programming the robot",
        code: "zip"
      }
    ];


    let currentStep = 0;

    function showStep(index) {
      const step = steps[index];
      const stepContainer = document.getElementById("step-container");
      stepContainer.classList.add('animate__fadeOut');
      setTimeout(() => {
        document.getElementById("step-title").innerText = step.title;

        // Handle images (single or multiple)
        const stepImagesContainer = document.getElementById("step-images");
        stepImagesContainer.innerHTML = "";
        if (step.imgs && step.imgs.length > 0) {
          step.imgs.forEach(src => {
            const imgEl = document.createElement("img");
            imgEl.src = src;
            imgEl.alt = step.title;
            imgEl.classList.add("step-img");
            stepImagesContainer.appendChild(imgEl);
          });
        } else if (step.img) {
          const imgEl = document.createElement("img");
          imgEl.src = step.img;
          imgEl.alt = step.title;
          imgEl.classList.add("step-img");
          stepImagesContainer.appendChild(imgEl);
        }

        // document.getElementById("step-desc").innerText = step.desc;
        if (Array.isArray(step.desc)) {
          // If it's an array, create a list
          let listHTML = '<ol>';
          step.desc.forEach(item => {
            listHTML += `<li>${item}</li>`;
          });
          listHTML += '</ol>';
          // Now, insert the listHTML into your component's paragraph or a new element
          document.getElementById('step-desc').innerHTML = listHTML;
        } else {
          // If it's a string, display it as plain text
          document.getElementById('step-desc').innerHTML = `<p>${step.desc}</p>`;
        }

        document.getElementById("step-caption").innerText = step.caption || "";

        // Handle code block
        if (step.code=="zip"){
          document.getElementById("code-block").style.display = "block";
        }
        else if (step.code) {
          document.getElementById("code-block").style.display = "block";
          document.getElementById("arduino-code").innerText = step.code;
        } else {
          document.getElementById("code-block").style.display = "none";
        }

        const progress = ((currentStep + 1) / steps.length) * 100;
        document.getElementById("progress-bar").style.width = progress + "%";
        document.getElementById("progress-label").innerText = `Step ${currentStep + 1} of ${steps.length}`;

        // Update button text on last step
        const nextBtn = document.getElementById("next-btn");
        if (currentStep === steps.length - 1) {
          nextBtn.innerText = "Finish ✅";
        } else {
          nextBtn.innerText = "Next ➡";
        }

        stepContainer.classList.remove('animate__fadeOut');
        stepContainer.classList.add('animate__fadeIn');
      }, 300);
    }

    function nextStep() {
      if (currentStep < steps.length - 1) {
        currentStep++;
        showStep(currentStep);
      } else {
        // Redirect back to intro page
        window.location.href = "acebott_cam_intro.html";
      }
    }

    function prevStep() {
      if (currentStep > 0) {
        currentStep--;
        showStep(currentStep);
      } else {
        // Redirect back to intro page
        window.location.href = "acebott_cam_intro.html";
      }
    }

    async function copyCode(buttonID) {
      const copyButton = document.getElementById(buttonID);
      const originalText = copyButton.textContent;

      copyButton.textContent = "Copying...";

      try {
        const codeText = getCode();

        if (codeText) {
          await navigator.clipboard.writeText(codeText);

          copyButton.textContent = "Copied!";
          copyButton.style.backgroundColor = "#28a745";

          setTimeout(() => {
            copyButton.textContent = originalText;
            copyButton.style.backgroundColor = "";
          }, 2000);
        } else {
          throw new Error("Failed to get code content.");
        }
      } catch (err) {
        console.error('Copy failed: ', err);
        copyButton.textContent = originalText;
        alert('Failed to copy code.');
      }
    }

    function getCode() {
      return SmartCarIR;
    }

    const copyButton = document.getElementById('copy-button');
    if (copyButton) {
      copyButton.addEventListener('click', () => {
        copyCode('copy-button');
      });
    }

    const nextButton = document.getElementById('next-btn');
    if (nextButton) {
      nextButton.addEventListener('click', () => {
        nextStep();
      });
    }

    const prevButton = document.getElementById('prev-btn');
    if (prevButton) {
      prevButton.addEventListener('click', () => {
        prevStep();
      });
    }

    // Initial load
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }
        
    window.addEventListener('load', () => {          
      const stepParam = getQueryParam("step");
      if (stepParam) {
        const startStep = parseInt(stepParam, 10);
        if (!isNaN(startStep) && startStep >= 0 && startStep < steps.length) {
          currentStep = startStep;
        }
      }
      showStep(currentStep);
    });


     // Hamburger toggle
    const hamburger = document.querySelector(".hamburger");
    const nav = document.querySelector("nav");

    hamburger.addEventListener("click", () => {
      nav.classList.toggle("active");
    });

    // Close nav when clicking outside
    document.addEventListener("click", (e) => {
      if (!nav.contains(e.target) && !hamburger.contains(e.target)) {
        nav.classList.remove("active");
      }
    });
  </script>

</body>

</html>